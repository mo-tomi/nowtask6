<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>24時間ゲージ カスタマイズ版</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f0f0f0;
      padding: 40px 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .page-header {
      margin-bottom: 30px;
      text-align: center;
    }

    .page-header h1 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #000;
    }

    .page-header p {
      color: #666;
      font-size: 13px;
    }

    /* コントロールパネル */
    .control-panel {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .control-group {
      margin-bottom: 20px;
    }

    .control-group label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }

    .control-group select,
    .control-group input {
      width: 100%;
      padding: 8px 12px;
      font-size: 14px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-family: inherit;
    }

    .control-group input[type="range"] {
      width: 100%;
      height: 6px;
      cursor: pointer;
    }

    .hour-display {
      text-align: center;
      font-size: 24px;
      font-weight: 600;
      color: #5f6368;
      margin-top: 8px;
    }

    /* ゲージカード */
    .gauge-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .gauge-label {
      font-size: 12px;
      color: #333;
      margin-bottom: 12px;
      font-weight: 600;
      letter-spacing: 0.3px;
    }

    .gauge-wrapper {
      margin-bottom: 20px;
    }

    .gauge-bar-2 {
      display: flex;
      gap: 2px;
      margin-bottom: 8px;
      position: relative;
    }

    .gauge-step {
      flex: 1;
      height: 24px;
      background: #e0e0e0;
      border-radius: 4px;
      position: relative;
    }

    .gauge-step.active {
      background: #333;
    }

    .gauge-step.active.current-marker-highlight {
      background: #f5f5f7 !important;
      border: 2px solid #5f6368;
      box-sizing: border-box;
    }

    /* 時間表記 */
    .time-labels {
      display: flex;
      gap: 2px;
      font-size: 9px;
      color: #999;
      overflow: hidden;
    }

    .time-label {
      flex: 1;
      text-align: center;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .gauge-legend {
      display: flex;
      gap: 12px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #efefef;
      font-size: 11px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 4px;
      color: #999;
    }

    .legend-color {
      width: 10px;
      height: 10px;
      border-radius: 2px;
    }

    /* ボタン */
    .button-group {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
    }

    button {
      flex: 1;
      padding: 10px;
      font-size: 12px;
      font-weight: 600;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      color: #333;
      cursor: pointer;
      transition: all 0.2s;
    }

    button:hover {
      background: #f5f5f5;
      border-color: #999;
    }

    button.active {
      background: #333;
      color: white;
      border-color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="page-header">
      <h1>24時間ゲージ カスタマイズ版</h1>
      <p>時間表記パターンと現在時刻を選択できます</p>
    </div>

    <div class="control-panel">
      <div class="control-group">
        <label>時間表記パターン</label>
        <select id="patternSelect">
          <option value="0">パターン0: 数字のみ（0-23）</option>
          <option value="1">パターン1: 時刻表記（0:00-23:00）</option>
          <option value="3">パターン3: 3時間区切り表記</option>
          <option value="4" selected>パターン4: 6時間区切り表記</option>
        </select>
      </div>

      <div class="control-group">
        <label>現在時刻（時間）</label>
        <input type="range" id="hourSlider" min="0" max="23" value="8">
        <div class="hour-display"><span id="hourDisplay">08:00</span></div>
      </div>

      <div class="control-group">
        <label>予定パターン</label>
        <div class="button-group">
          <button id="patternA" class="active">朝（0-7）</button>
          <button id="patternB">昼（8-15）</button>
          <button id="patternC">晩（16-23）</button>
          <button id="patternD">フル</button>
        </div>
      </div>
    </div>

    <div class="gauge-card">
      <div class="gauge-label">本日の予定</div>
      <div class="gauge-wrapper">
        <div class="gauge-bar-2" id="gaugeBar"></div>
        <div class="time-labels" id="timeLabels"></div>
      </div>

      <div class="gauge-legend">
        <div class="legend-item">
          <div class="legend-color" style="background: #333;"></div>
          <span>予定済み</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #e0e0e0;"></div>
          <span>空き</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    const patterns = {
      0: Array(24).fill(false).map((_, i) => `${i}`),
      1: Array(24).fill(false).map((_, i) => `${i}:00`),
      3: Array(24).fill('').map((_, i) => i % 3 === 0 ? `${i}:00` : ''),
      4: Array(24).fill('').map((_, i) => i % 6 === 0 ? `${i}:00` : '')
    };

    const schedulePatterns = {
      A: Array(24).fill(false).map((_, i) => i >= 0 && i < 8),
      B: Array(24).fill(false).map((_, i) => i >= 8 && i < 16),
      C: Array(24).fill(false).map((_, i) => i >= 16 && i < 24),
      D: Array(24).fill(false).map((_, i) => [3, 4, 5, 10, 11, 12, 18, 19, 20].includes(i))
    };

    let currentPattern = '4';
    let currentHour = 8;
    let currentSchedule = [...schedulePatterns.A];

    function updateGauge() {
      const gaugeBar = document.getElementById('gaugeBar');
      const timeLabels = document.getElementById('timeLabels');

      // ゲージバーを生成
      gaugeBar.innerHTML = Array(24)
        .fill(false)
        .map((_, i) => {
          const isActive = currentSchedule[i];
          const isCurrent = i === currentHour;
          const classes = ['gauge-step'];
          if (isActive) classes.push('active');
          if (isCurrent) classes.push('active', 'current-marker-highlight');

          return `<div class="${classes.join(' ')}"></div>`;
        })
        .join('');

      // 時間ラベルを生成
      timeLabels.innerHTML = patterns[currentPattern]
        .map(label => `<div class="time-label">${label}</div>`)
        .join('');
    }

    // イベントリスナー
    document.getElementById('patternSelect').addEventListener('change', (e) => {
      currentPattern = e.target.value;
      updateGauge();
    });

    document.getElementById('hourSlider').addEventListener('input', (e) => {
      currentHour = parseInt(e.target.value);
      const hour = String(currentHour).padStart(2, '0');
      document.getElementById('hourDisplay').textContent = `${hour}:00`;
      updateGauge();
    });

    // 予定パターンボタン
    ['A', 'B', 'C', 'D'].forEach(letter => {
      document.getElementById(`pattern${letter}`).addEventListener('click', function() {
        document.querySelectorAll('.button-group button').forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        currentSchedule = [...schedulePatterns[letter]];
        updateGauge();
      });
    });

    // 初期化
    updateGauge();
  </script>
</body>
</html>
